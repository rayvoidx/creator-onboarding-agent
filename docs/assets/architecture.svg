<svg xmlns="http://www.w3.org/2000/svg" width="840" height="560" viewBox="0 0 840 560">
  <defs>
    <linearGradient id="abg" x1="0%" y1="0%" x2="100%" y2="100%">
      <stop offset="0%" stop-color="#0f172a"/>
      <stop offset="100%" stop-color="#1e293b"/>
    </linearGradient>
    <pattern id="agrid" width="24" height="24" patternUnits="userSpaceOnUse">
      <circle cx="12" cy="12" r="0.8" fill="#334155" opacity="0.4"/>
    </pattern>
  </defs>

  <rect width="840" height="560" rx="12" fill="url(#abg)"/>
  <rect width="840" height="560" rx="12" fill="url(#agrid)"/>

  <!-- Title -->
  <text x="420" y="28" text-anchor="middle" font-family="system-ui,sans-serif" font-size="13" font-weight="700" fill="#f8fafc">Multi-Agent Architecture</text>

  <!-- ═══ User Query (Top) ═══ -->
  <rect x="340" y="42" width="160" height="36" rx="18" fill="#8b5cf6" opacity="0.2" stroke="#8b5cf6" stroke-width="1"/>
  <text x="420" y="64" text-anchor="middle" font-family="system-ui,sans-serif" font-size="12" font-weight="600" fill="#c4b5fd">User Query</text>

  <!-- Arrow down -->
  <line x1="420" y1="78" x2="420" y2="104" stroke="#475569" stroke-width="1.5"/>
  <polygon points="414,100 420,110 426,100" fill="#475569"/>
  <circle r="4" fill="#8b5cf6" opacity="0.8">
    <animateMotion dur="2s" repeatCount="indefinite" path="M420,78 L420,104"/>
  </circle>

  <!-- ═══ Intent Analyzer ═══ -->
  <rect x="300" y="110" width="240" height="44" rx="8" fill="#1e293b" stroke="#6366f1" stroke-width="1.5"/>
  <text x="420" y="136" text-anchor="middle" font-family="system-ui,sans-serif" font-size="12" font-weight="600" fill="#a5b4fc">Intent Analyzer (7 Intents)</text>

  <!-- Three arrows branching -->
  <line x1="350" y1="154" x2="170" y2="194" stroke="#475569" stroke-width="1.2"/>
  <line x1="420" y1="154" x2="420" y2="194" stroke="#475569" stroke-width="1.2"/>
  <line x1="490" y1="154" x2="670" y2="194" stroke="#475569" stroke-width="1.2"/>
  <circle r="4" fill="#8b5cf6" opacity="0.7">
    <animateMotion dur="1.8s" repeatCount="indefinite" path="M350,154 L170,194"/>
  </circle>
  <circle r="4" fill="#6366f1" opacity="0.7">
    <animateMotion dur="1.8s" begin="0.6s" repeatCount="indefinite" path="M420,154 L420,194"/>
  </circle>
  <circle r="4" fill="#8b5cf6" opacity="0.7">
    <animateMotion dur="1.8s" begin="1.2s" repeatCount="indefinite" path="M490,154 L670,194"/>
  </circle>

  <!-- ═══ Three Agent Boxes ═══ -->
  <!-- Creator Agent -->
  <rect x="80" y="198" width="180" height="130" rx="8" fill="#1e293b" stroke="#8b5cf6" stroke-width="1.5">
    <animate attributeName="stroke-opacity" values="0.6;1;0.6" dur="3s" repeatCount="indefinite"/>
  </rect>
  <text x="170" y="222" text-anchor="middle" font-family="system-ui,sans-serif" font-size="12" font-weight="700" fill="#c4b5fd">Creator Agent</text>
  <text x="170" y="244" text-anchor="middle" font-family="system-ui,sans-serif" font-size="10" fill="#94a3b8">Profile Scraping</text>
  <text x="170" y="260" text-anchor="middle" font-family="system-ui,sans-serif" font-size="10" fill="#94a3b8">Metric Extraction</text>
  <text x="170" y="276" text-anchor="middle" font-family="system-ui,sans-serif" font-size="10" fill="#94a3b8">RAG Similarity Search</text>
  <text x="170" y="292" text-anchor="middle" font-family="system-ui,sans-serif" font-size="10" fill="#94a3b8">6-Grade Scoring (S~F)</text>
  <text x="170" y="308" text-anchor="middle" font-family="system-ui,sans-serif" font-size="10" fill="#94a3b8">Tier Classification</text>

  <!-- Mission Agent -->
  <rect x="330" y="198" width="180" height="130" rx="8" fill="#1e293b" stroke="#06b6d4" stroke-width="1.5">
    <animate attributeName="stroke-opacity" values="0.6;1;0.6" dur="3s" begin="1s" repeatCount="indefinite"/>
  </rect>
  <text x="420" y="222" text-anchor="middle" font-family="system-ui,sans-serif" font-size="12" font-weight="700" fill="#67e8f9">Mission Agent</text>
  <text x="420" y="244" text-anchor="middle" font-family="system-ui,sans-serif" font-size="10" fill="#94a3b8">Creator-Mission Match</text>
  <text x="420" y="260" text-anchor="middle" font-family="system-ui,sans-serif" font-size="10" fill="#94a3b8">Compatibility Score</text>
  <text x="420" y="276" text-anchor="middle" font-family="system-ui,sans-serif" font-size="10" fill="#94a3b8">MCP Tool Integration</text>
  <text x="420" y="292" text-anchor="middle" font-family="system-ui,sans-serif" font-size="10" fill="#94a3b8">YouTube Insights</text>
  <text x="420" y="308" text-anchor="middle" font-family="system-ui,sans-serif" font-size="10" fill="#94a3b8">Brand Safety Check</text>

  <!-- Competency Agent -->
  <rect x="580" y="198" width="180" height="130" rx="8" fill="#1e293b" stroke="#10b981" stroke-width="1.5">
    <animate attributeName="stroke-opacity" values="0.6;1;0.6" dur="3s" begin="2s" repeatCount="indefinite"/>
  </rect>
  <text x="670" y="222" text-anchor="middle" font-family="system-ui,sans-serif" font-size="12" font-weight="700" fill="#6ee7b7">Competency Agent</text>
  <text x="670" y="244" text-anchor="middle" font-family="system-ui,sans-serif" font-size="10" fill="#94a3b8">ML (RandomForest)</text>
  <text x="670" y="260" text-anchor="middle" font-family="system-ui,sans-serif" font-size="10" fill="#94a3b8">Skill Diagnosis</text>
  <text x="670" y="276" text-anchor="middle" font-family="system-ui,sans-serif" font-size="10" fill="#94a3b8">Learning Path</text>
  <text x="670" y="292" text-anchor="middle" font-family="system-ui,sans-serif" font-size="10" fill="#94a3b8">Recommendation</text>
  <text x="670" y="308" text-anchor="middle" font-family="system-ui,sans-serif" font-size="10" fill="#94a3b8">Growth Tracking</text>

  <!-- ═══ Side agents ═══ -->
  <!-- Deep Agent (left) -->
  <rect x="14" y="360" width="140" height="68" rx="6" fill="#1e293b" stroke="#f97316" stroke-width="1" stroke-dasharray="4 2"/>
  <text x="84" y="382" text-anchor="middle" font-family="system-ui,sans-serif" font-size="10" font-weight="600" fill="#fb923c">Deep Agent</text>
  <text x="84" y="398" text-anchor="middle" font-family="system-ui,sans-serif" font-size="9" fill="#94a3b8">Multi-step Reasoning</text>
  <text x="84" y="412" text-anchor="middle" font-family="system-ui,sans-serif" font-size="9" fill="#94a3b8">Self-Critique Loop</text>

  <!-- Search Agent (right) -->
  <rect x="686" y="360" width="140" height="68" rx="6" fill="#1e293b" stroke="#ec4899" stroke-width="1" stroke-dasharray="4 2"/>
  <text x="756" y="382" text-anchor="middle" font-family="system-ui,sans-serif" font-size="10" font-weight="600" fill="#f472b6">Search Agent</text>
  <text x="756" y="398" text-anchor="middle" font-family="system-ui,sans-serif" font-size="9" fill="#94a3b8">Hybrid Retrieval</text>
  <text x="756" y="412" text-anchor="middle" font-family="system-ui,sans-serif" font-size="9" fill="#94a3b8">CrossEncoder Rerank</text>

  <!-- Converging arrows to RAG -->
  <line x1="170" y1="328" x2="420" y2="370" stroke="#475569" stroke-width="1.2"/>
  <line x1="420" y1="328" x2="420" y2="370" stroke="#475569" stroke-width="1.2"/>
  <line x1="670" y1="328" x2="420" y2="370" stroke="#475569" stroke-width="1.2"/>
  <circle r="4" fill="#8b5cf6" opacity="0.6">
    <animateMotion dur="2s" repeatCount="indefinite" path="M170,328 L420,370"/>
  </circle>
  <circle r="4" fill="#06b6d4" opacity="0.6">
    <animateMotion dur="2s" begin="0.7s" repeatCount="indefinite" path="M420,328 L420,370"/>
  </circle>
  <circle r="4" fill="#10b981" opacity="0.6">
    <animateMotion dur="2s" begin="1.4s" repeatCount="indefinite" path="M670,328 L420,370"/>
  </circle>

  <!-- Side agent connections -->
  <line x1="154" y1="394" x2="220" y2="420" stroke="#475569" stroke-width="0.8" stroke-dasharray="3 2"/>
  <line x1="686" y1="394" x2="620" y2="420" stroke="#475569" stroke-width="0.8" stroke-dasharray="3 2"/>

  <!-- ═══ RAG Pipeline Box ═══ -->
  <rect x="220" y="374" width="400" height="110" rx="10" fill="#1e293b" stroke="#f59e0b" stroke-width="1.5" stroke-dasharray="6 3">
    <animate attributeName="stroke-dashoffset" values="0;18" dur="3s" repeatCount="indefinite"/>
  </rect>
  <text x="420" y="398" text-anchor="middle" font-family="system-ui,sans-serif" font-size="13" font-weight="700" fill="#fbbf24">RAG Pipeline</text>
  <text x="420" y="418" text-anchor="middle" font-family="system-ui,sans-serif" font-size="10" fill="#94a3b8">Query Expansion (5 vars) &gt; Hybrid Retrieval (Vector + BM25)</text>
  <text x="420" y="434" text-anchor="middle" font-family="system-ui,sans-serif" font-size="10" fill="#94a3b8">CrossEncoder Rerank &gt;= 0.85 &gt; Context Build (128K)</text>
  <text x="420" y="450" text-anchor="middle" font-family="system-ui,sans-serif" font-size="10" fill="#94a3b8">Multi-Model: Claude | GPT | Gemini</text>
  <text x="420" y="466" text-anchor="middle" font-family="system-ui,sans-serif" font-size="10" fill="#94a3b8">Response Refine + Cache &gt; SSE Stream</text>

  <!-- Arrow to output -->
  <line x1="420" y1="484" x2="420" y2="514" stroke="#475569" stroke-width="1.5"/>
  <polygon points="414,510 420,520 426,510" fill="#475569"/>
  <circle r="4" fill="#f59e0b" opacity="0.7">
    <animateMotion dur="1.5s" repeatCount="indefinite" path="M420,484 L420,514"/>
  </circle>

  <!-- ═══ SSE Response ═══ -->
  <rect x="320" y="522" width="200" height="28" rx="14" fill="#10b981" opacity="0.2" stroke="#10b981" stroke-width="1"/>
  <text x="420" y="540" text-anchor="middle" font-family="system-ui,sans-serif" font-size="11" font-weight="600" fill="#6ee7b7">SSE Stream Response</text>
</svg>